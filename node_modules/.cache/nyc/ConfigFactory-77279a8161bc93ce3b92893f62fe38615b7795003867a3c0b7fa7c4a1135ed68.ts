"use strict";function cov_2niiw6x58b(){var path="/Users/shaunegan/dev/hotloop.io/coverage-action/src/ConfigFactory.ts";var hash="d32e45edd8fd05c2faec0c4b9e2570619c4a654b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"/Users/shaunegan/dev/hotloop.io/coverage-action/src/ConfigFactory.ts",statementMap:{"0":{start:{line:2,column:0},end:{line:2,column:62}},"1":{start:{line:3,column:0},end:{line:3,column:31}},"2":{start:{line:4,column:13},end:{line:4,column:37}},"3":{start:{line:5,column:11},end:{line:5,column:24}},"4":{start:{line:6,column:35},end:{line:34,column:3}},"5":{start:{line:9,column:4},end:{line:32,column:6}},"6":{start:{line:10,column:22},end:{line:10,column:40}},"7":{start:{line:11,column:18},end:{line:11,column:49}},"8":{start:{line:12,column:25},end:{line:12,column:56}},"9":{start:{line:13,column:22},end:{line:13,column:43}},"10":{start:{line:14,column:8},end:{line:15,column:68}},"11":{start:{line:15,column:12},end:{line:15,column:68}},"12":{start:{line:16,column:8},end:{line:17,column:68}},"13":{start:{line:17,column:12},end:{line:17,column:68}},"14":{start:{line:18,column:8},end:{line:19,column:71}},"15":{start:{line:19,column:12},end:{line:19,column:71}},"16":{start:{line:20,column:8},end:{line:31,column:15}},"17":{start:{line:21,column:39},end:{line:21,column:61}},"18":{start:{line:22,column:37},end:{line:22,column:77}},"19":{start:{line:23,column:38},end:{line:31,column:11}},"20":{start:{line:33,column:4},end:{line:33,column:25}},"21":{start:{line:35,column:0},end:{line:35,column:38}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:6,column:35},end:{line:6,column:36}},loc:{start:{line:6,column:47},end:{line:34,column:1}},line:6},"1":{name:"ConfigFactory",decl:{start:{line:7,column:13},end:{line:7,column:26}},loc:{start:{line:7,column:29},end:{line:8,column:5}},line:7},"2":{name:"(anonymous_2)",decl:{start:{line:9,column:24},end:{line:9,column:25}},loc:{start:{line:9,column:58},end:{line:32,column:5}},line:9},"3":{name:"(anonymous_3)",decl:{start:{line:21,column:18},end:{line:21,column:19}},loc:{start:{line:21,column:37},end:{line:21,column:63}},line:21},"4":{name:"(anonymous_4)",decl:{start:{line:22,column:18},end:{line:22,column:19}},loc:{start:{line:22,column:35},end:{line:22,column:79}},line:22},"5":{name:"(anonymous_5)",decl:{start:{line:23,column:18},end:{line:23,column:19}},loc:{start:{line:23,column:36},end:{line:31,column:13}},line:23}},branchMap:{"0":{loc:{start:{line:14,column:8},end:{line:15,column:68}},type:"if",locations:[{start:{line:14,column:8},end:{line:15,column:68}},{start:{line:14,column:8},end:{line:15,column:68}}],line:14},"1":{loc:{start:{line:16,column:8},end:{line:17,column:68}},type:"if",locations:[{start:{line:16,column:8},end:{line:17,column:68}},{start:{line:16,column:8},end:{line:17,column:68}}],line:16},"2":{loc:{start:{line:18,column:8},end:{line:19,column:71}},type:"if",locations:[{start:{line:18,column:8},end:{line:19,column:71}},{start:{line:18,column:8},end:{line:19,column:71}}],line:18},"3":{loc:{start:{line:18,column:12},end:{line:18,column:63}},type:"binary-expr",locations:[{start:{line:18,column:12},end:{line:18,column:31}},{start:{line:18,column:35},end:{line:18,column:63}}],line:18},"4":{loc:{start:{line:27,column:28},end:{line:27,column:83}},type:"cond-expr",locations:[{start:{line:27,column:49},end:{line:27,column:76}},{start:{line:27,column:79},end:{line:27,column:83}}],line:27},"5":{loc:{start:{line:28,column:24},end:{line:28,column:101}},type:"cond-expr",locations:[{start:{line:28,column:47},end:{line:28,column:76}},{start:{line:28,column:79},end:{line:28,column:101}}],line:28},"6":{loc:{start:{line:29,column:29},end:{line:29,column:86}},type:"cond-expr",locations:[{start:{line:29,column:52},end:{line:29,column:79}},{start:{line:29,column:82},end:{line:29,column:86}}],line:29}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0},b:{"0":[0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0],"6":[0,0]},inputSourceMap:{version:3,file:"/Users/shaunegan/dev/hotloop.io/coverage-action/src/ConfigFactory.ts",sources:["/Users/shaunegan/dev/hotloop.io/coverage-action/src/ConfigFactory.ts"],names:[],mappings:";;;AAEA,sCAA+C;AAE/C,yBAAmC;AAUnC;IAAA;IAwBA,CAAC;IAvBe,iBAAG,GAAjB,UAAmB,OAAsB,EAAE,aAAsB;QAC/D,IAAM,OAAO,GAAG,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAA;QAClC,IAAM,GAAG,GAAW,OAAO,CAAC,aAAa,EAAE,OAAO,CAAC,CAAA;QACnD,IAAM,UAAU,GAAW,OAAO,CAAC,aAAa,EAAE,OAAO,CAAC,CAAA;QAC1D,IAAM,OAAO,GAAmB,aAAa,CAAC,OAAO,CAAA;QAErD,IAAI,GAAG,KAAK,EAAE;YAAE,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC,CAAA;QACvE,IAAI,UAAU,KAAK,EAAE;YAAE,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC,CAAA;QAC9E,IAAI,CAAC,OAAO,CAAC,UAAU,IAAI,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ;YAAE,OAAO,OAAO,CAAC,MAAM,CAAC,IAAI,KAAK,CAAC,wBAAwB,CAAC,CAAC,CAAA;QAEnH,OAAO,aAAM,CAAC,UAAU,CAAC;aACtB,IAAI,CAAC,UAAC,OAAgB,IAAK,OAAA,OAAO,CAAC,IAAI,EAAE,EAAd,CAAc,CAAC;aAC1C,IAAI,CAAC,UAAC,KAAe,IAAK,OAAA,aAAE,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,EAArB,CAAqB,CAAC;aAChD,IAAI,CAAC,UAAC,MAAc,IAAM,OAAA,CAAC;YAC1B,GAAG,KAAA;YACH,OAAO,EAAE;gBACP,IAAI,EAAE,MAAM,CAAC,QAAQ,EAAE;gBACvB,UAAU,EAAE,OAAO,CAAC,UAAU,CAAC,CAAC,CAAC,OAAO,CAAC,UAAU,CAAC,QAAQ,CAAC,CAAC,CAAC,IAAI;gBACnE,MAAM,EAAE,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,EAAE,CAAC;gBACrF,WAAW,EAAE,OAAO,CAAC,YAAY,CAAC,CAAC,CAAC,OAAO,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC,CAAC,IAAI;aACvE;SACS,CAAA,EARe,CAQf,CAAC,CAAA;IACjB,CAAC;IACH,oBAAC;AAAD,CAAC,AAxBD,IAwBC;AAEQ,sCAAa",sourcesContent:["import { InputOptions } from '@actions/core'\nimport { Context } from '@actions/github/lib/context'\nimport { create, Globber } from '@actions/glob'\nimport { WebhookPayload } from '@actions/github/lib/interfaces'\nimport { promises as fs } from 'fs'\nimport { SyncCoverageOptions } from '@hotloop/hotloop-sdk'\n\ninterface Config {\n  key: string\n  options: SyncCoverageOptions\n}\n\ntype InputFunction = (name: string, options?: InputOptions) => string\n\nclass ConfigFactory {\n  public static get (inputFn: InputFunction, githubContext: Context): Promise<Config> {\n    const options = { required: true }\n    const key: string = inputFn('hotloop-key', options)\n    const reportPath: string = inputFn('report-path', options)\n    const context: WebhookPayload = githubContext.payload\n\n    if (key === '') return Promise.reject(new Error('invalid hotloop key'))\n    if (reportPath === '') return Promise.reject(new Error('invalid report path'))\n    if (!context.repository || !context.repository.html_url) return Promise.reject(new Error('invalid github context'))\n\n    return create(reportPath)\n      .then((globber: Globber) => globber.glob())\n      .then((files: string[]) => fs.readFile(files[0]))\n      .then((report: Buffer ) => ({\n        key,\n        options: {\n          lcov: report.toString(),\n          repository: context.repository ? context.repository.html_url : null,\n          branch: context.pull_request ? context.pull_request.head.ref : context.ref.substr(11),\n          issueNumber: context.pull_request ? context.pull_request.number : null\n        }\n      } as Config))\n  }\n}\n\nexport { ConfigFactory, InputFunction, Config }\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"d32e45edd8fd05c2faec0c4b9e2570619c4a654b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_2niiw6x58b=function(){return actualCoverage;};}return actualCoverage;}cov_2niiw6x58b();cov_2niiw6x58b().s[0]++;Object.defineProperty(exports,"__esModule",{value:true});cov_2niiw6x58b().s[1]++;exports.ConfigFactory=void 0;var glob_1=(cov_2niiw6x58b().s[2]++,require("@actions/glob"));var fs_1=(cov_2niiw6x58b().s[3]++,require("fs"));var ConfigFactory=(/** @class */cov_2niiw6x58b().s[4]++,function(){cov_2niiw6x58b().f[0]++;function ConfigFactory(){cov_2niiw6x58b().f[1]++;}cov_2niiw6x58b().s[5]++;ConfigFactory.get=function(inputFn,githubContext){cov_2niiw6x58b().f[2]++;var options=(cov_2niiw6x58b().s[6]++,{required:true});var key=(cov_2niiw6x58b().s[7]++,inputFn('hotloop-key',options));var reportPath=(cov_2niiw6x58b().s[8]++,inputFn('report-path',options));var context=(cov_2niiw6x58b().s[9]++,githubContext.payload);cov_2niiw6x58b().s[10]++;if(key===''){cov_2niiw6x58b().b[0][0]++;cov_2niiw6x58b().s[11]++;return Promise.reject(new Error('invalid hotloop key'));}else{cov_2niiw6x58b().b[0][1]++;}cov_2niiw6x58b().s[12]++;if(reportPath===''){cov_2niiw6x58b().b[1][0]++;cov_2niiw6x58b().s[13]++;return Promise.reject(new Error('invalid report path'));}else{cov_2niiw6x58b().b[1][1]++;}cov_2niiw6x58b().s[14]++;if((cov_2niiw6x58b().b[3][0]++,!context.repository)||(cov_2niiw6x58b().b[3][1]++,!context.repository.html_url)){cov_2niiw6x58b().b[2][0]++;cov_2niiw6x58b().s[15]++;return Promise.reject(new Error('invalid github context'));}else{cov_2niiw6x58b().b[2][1]++;}cov_2niiw6x58b().s[16]++;return glob_1.create(reportPath).then(function(globber){cov_2niiw6x58b().f[3]++;cov_2niiw6x58b().s[17]++;return globber.glob();}).then(function(files){cov_2niiw6x58b().f[4]++;cov_2niiw6x58b().s[18]++;return fs_1.promises.readFile(files[0]);}).then(function(report){cov_2niiw6x58b().f[5]++;cov_2niiw6x58b().s[19]++;return{key:key,options:{lcov:report.toString(),repository:context.repository?(cov_2niiw6x58b().b[4][0]++,context.repository.html_url):(cov_2niiw6x58b().b[4][1]++,null),branch:context.pull_request?(cov_2niiw6x58b().b[5][0]++,context.pull_request.head.ref):(cov_2niiw6x58b().b[5][1]++,context.ref.substr(11)),issueNumber:context.pull_request?(cov_2niiw6x58b().b[6][0]++,context.pull_request.number):(cov_2niiw6x58b().b[6][1]++,null)}};});};cov_2niiw6x58b().s[20]++;return ConfigFactory;}());cov_2niiw6x58b().s[21]++;exports.ConfigFactory=ConfigFactory;//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiL1VzZXJzL3NoYXVuZWdhbi9kZXYvaG90bG9vcC5pby9jb3ZlcmFnZS1hY3Rpb24vc3JjL0NvbmZpZ0ZhY3RvcnkudHMiLCJzb3VyY2VzIjpbIi9Vc2Vycy9zaGF1bmVnYW4vZGV2L2hvdGxvb3AuaW8vY292ZXJhZ2UtYWN0aW9uL3NyYy9Db25maWdGYWN0b3J5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQUVBLHNDQUErQztBQUUvQyx5QkFBbUM7QUFVbkM7SUFBQTtJQXdCQSxDQUFDO0lBdkJlLGlCQUFHLEdBQWpCLFVBQW1CLE9BQXNCLEVBQUUsYUFBc0I7UUFDL0QsSUFBTSxPQUFPLEdBQUcsRUFBRSxRQUFRLEVBQUUsSUFBSSxFQUFFLENBQUE7UUFDbEMsSUFBTSxHQUFHLEdBQVcsT0FBTyxDQUFDLGFBQWEsRUFBRSxPQUFPLENBQUMsQ0FBQTtRQUNuRCxJQUFNLFVBQVUsR0FBVyxPQUFPLENBQUMsYUFBYSxFQUFFLE9BQU8sQ0FBQyxDQUFBO1FBQzFELElBQU0sT0FBTyxHQUFtQixhQUFhLENBQUMsT0FBTyxDQUFBO1FBRXJELElBQUksR0FBRyxLQUFLLEVBQUU7WUFBRSxPQUFPLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxLQUFLLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFBO1FBQ3ZFLElBQUksVUFBVSxLQUFLLEVBQUU7WUFBRSxPQUFPLE9BQU8sQ0FBQyxNQUFNLENBQUMsSUFBSSxLQUFLLENBQUMscUJBQXFCLENBQUMsQ0FBQyxDQUFBO1FBQzlFLElBQUksQ0FBQyxPQUFPLENBQUMsVUFBVSxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxRQUFRO1lBQUUsT0FBTyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksS0FBSyxDQUFDLHdCQUF3QixDQUFDLENBQUMsQ0FBQTtRQUVuSCxPQUFPLGFBQU0sQ0FBQyxVQUFVLENBQUM7YUFDdEIsSUFBSSxDQUFDLFVBQUMsT0FBZ0IsSUFBSyxPQUFBLE9BQU8sQ0FBQyxJQUFJLEVBQUUsRUFBZCxDQUFjLENBQUM7YUFDMUMsSUFBSSxDQUFDLFVBQUMsS0FBZSxJQUFLLE9BQUEsYUFBRSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBckIsQ0FBcUIsQ0FBQzthQUNoRCxJQUFJLENBQUMsVUFBQyxNQUFjLElBQU0sT0FBQSxDQUFDO1lBQzFCLEdBQUcsS0FBQTtZQUNILE9BQU8sRUFBRTtnQkFDUCxJQUFJLEVBQUUsTUFBTSxDQUFDLFFBQVEsRUFBRTtnQkFDdkIsVUFBVSxFQUFFLE9BQU8sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxJQUFJO2dCQUNuRSxNQUFNLEVBQUUsT0FBTyxDQUFDLFlBQVksQ0FBQyxDQUFDLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUM7Z0JBQ3JGLFdBQVcsRUFBRSxPQUFPLENBQUMsWUFBWSxDQUFDLENBQUMsQ0FBQyxPQUFPLENBQUMsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsSUFBSTthQUN2RTtTQUNTLENBQUEsRUFSZSxDQVFmLENBQUMsQ0FBQTtJQUNqQixDQUFDO0lBQ0gsb0JBQUM7QUFBRCxDQUFDLEFBeEJELElBd0JDO0FBRVEsc0NBQWEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbnB1dE9wdGlvbnMgfSBmcm9tICdAYWN0aW9ucy9jb3JlJ1xuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gJ0BhY3Rpb25zL2dpdGh1Yi9saWIvY29udGV4dCdcbmltcG9ydCB7IGNyZWF0ZSwgR2xvYmJlciB9IGZyb20gJ0BhY3Rpb25zL2dsb2InXG5pbXBvcnQgeyBXZWJob29rUGF5bG9hZCB9IGZyb20gJ0BhY3Rpb25zL2dpdGh1Yi9saWIvaW50ZXJmYWNlcydcbmltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSAnZnMnXG5pbXBvcnQgeyBTeW5jQ292ZXJhZ2VPcHRpb25zIH0gZnJvbSAnQGhvdGxvb3AvaG90bG9vcC1zZGsnXG5cbmludGVyZmFjZSBDb25maWcge1xuICBrZXk6IHN0cmluZ1xuICBvcHRpb25zOiBTeW5jQ292ZXJhZ2VPcHRpb25zXG59XG5cbnR5cGUgSW5wdXRGdW5jdGlvbiA9IChuYW1lOiBzdHJpbmcsIG9wdGlvbnM/OiBJbnB1dE9wdGlvbnMpID0+IHN0cmluZ1xuXG5jbGFzcyBDb25maWdGYWN0b3J5IHtcbiAgcHVibGljIHN0YXRpYyBnZXQgKGlucHV0Rm46IElucHV0RnVuY3Rpb24sIGdpdGh1YkNvbnRleHQ6IENvbnRleHQpOiBQcm9taXNlPENvbmZpZz4ge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7IHJlcXVpcmVkOiB0cnVlIH1cbiAgICBjb25zdCBrZXk6IHN0cmluZyA9IGlucHV0Rm4oJ2hvdGxvb3Ata2V5Jywgb3B0aW9ucylcbiAgICBjb25zdCByZXBvcnRQYXRoOiBzdHJpbmcgPSBpbnB1dEZuKCdyZXBvcnQtcGF0aCcsIG9wdGlvbnMpXG4gICAgY29uc3QgY29udGV4dDogV2ViaG9va1BheWxvYWQgPSBnaXRodWJDb250ZXh0LnBheWxvYWRcblxuICAgIGlmIChrZXkgPT09ICcnKSByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdpbnZhbGlkIGhvdGxvb3Aga2V5JykpXG4gICAgaWYgKHJlcG9ydFBhdGggPT09ICcnKSByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdpbnZhbGlkIHJlcG9ydCBwYXRoJykpXG4gICAgaWYgKCFjb250ZXh0LnJlcG9zaXRvcnkgfHwgIWNvbnRleHQucmVwb3NpdG9yeS5odG1sX3VybCkgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignaW52YWxpZCBnaXRodWIgY29udGV4dCcpKVxuXG4gICAgcmV0dXJuIGNyZWF0ZShyZXBvcnRQYXRoKVxuICAgICAgLnRoZW4oKGdsb2JiZXI6IEdsb2JiZXIpID0+IGdsb2JiZXIuZ2xvYigpKVxuICAgICAgLnRoZW4oKGZpbGVzOiBzdHJpbmdbXSkgPT4gZnMucmVhZEZpbGUoZmlsZXNbMF0pKVxuICAgICAgLnRoZW4oKHJlcG9ydDogQnVmZmVyICkgPT4gKHtcbiAgICAgICAga2V5LFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgbGNvdjogcmVwb3J0LnRvU3RyaW5nKCksXG4gICAgICAgICAgcmVwb3NpdG9yeTogY29udGV4dC5yZXBvc2l0b3J5ID8gY29udGV4dC5yZXBvc2l0b3J5Lmh0bWxfdXJsIDogbnVsbCxcbiAgICAgICAgICBicmFuY2g6IGNvbnRleHQucHVsbF9yZXF1ZXN0ID8gY29udGV4dC5wdWxsX3JlcXVlc3QuaGVhZC5yZWYgOiBjb250ZXh0LnJlZi5zdWJzdHIoMTEpLFxuICAgICAgICAgIGlzc3VlTnVtYmVyOiBjb250ZXh0LnB1bGxfcmVxdWVzdCA/IGNvbnRleHQucHVsbF9yZXF1ZXN0Lm51bWJlciA6IG51bGxcbiAgICAgICAgfVxuICAgICAgfSBhcyBDb25maWcpKVxuICB9XG59XG5cbmV4cG9ydCB7IENvbmZpZ0ZhY3RvcnksIElucHV0RnVuY3Rpb24sIENvbmZpZyB9XG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi9Vc2Vycy9zaGF1bmVnYW4vZGV2L2hvdGxvb3AuaW8vY292ZXJhZ2UtYWN0aW9uL3NyYy9Db25maWdGYWN0b3J5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI2N09Bc0JRO2lPQXBCUixHQUFBLENBQUEsTUFBQSwwQkFBQSxPQUFBLENBQUEsZUFBQSxDQUFBLENBQUEsQ0FFQSxHQUFBLENBQUEsSUFBQSwwQkFBQSxPQUFBLENBQUEsSUFBQSxDQUFBLENBQUEsQ0FVQSxHQUFBLENBQUEsYUFBQSxFQUFBLGFBQUEsd0JBQUEsVUFBQSx5QkFBQSxRQUFBLENBQUEsYUFBQSxFQUFBLHlCQXdCQyxDQXhCRCx3QkFDZ0IsYUFBQSxDQUFBLEdBQUEsQ0FBZCxTQUFtQixPQUFuQixDQUEyQyxhQUEzQyxDQUFpRSx5QkFDL0QsR0FBTSxDQUFBLE9BQU8sMEJBQUcsQ0FBRSxRQUFRLENBQUUsSUFBWixDQUFILENBQWIsQ0FDQSxHQUFNLENBQUEsR0FBRywwQkFBVyxPQUFPLENBQUMsYUFBRCxDQUFnQixPQUFoQixDQUFsQixDQUFULENBQ0EsR0FBTSxDQUFBLFVBQVUsMEJBQVcsT0FBTyxDQUFDLGFBQUQsQ0FBZ0IsT0FBaEIsQ0FBbEIsQ0FBaEIsQ0FDQSxHQUFNLENBQUEsT0FBTywwQkFBbUIsYUFBYSxDQUFDLE9BQWpDLENBQWIsQ0FKK0QseUJBTS9ELEdBQUksR0FBRyxHQUFLLEVBQVosQ0FBZ0IsMkRBQU8sQ0FBQSxPQUFPLENBQUMsTUFBUixDQUFlLEdBQUksQ0FBQSxLQUFKLENBQVUscUJBQVYsQ0FBZixDQUFQLENBQXVELENBQXZFLGlDQU4rRCx5QkFPL0QsR0FBSSxVQUFVLEdBQUssRUFBbkIsQ0FBdUIsMkRBQU8sQ0FBQSxPQUFPLENBQUMsTUFBUixDQUFlLEdBQUksQ0FBQSxLQUFKLENBQVUscUJBQVYsQ0FBZixDQUFQLENBQXVELENBQTlFLGlDQVArRCx5QkFRL0QsR0FBSSw2QkFBQyxPQUFPLENBQUMsVUFBVCwrQkFBdUIsQ0FBQyxPQUFPLENBQUMsVUFBUixDQUFtQixRQUEzQyxDQUFKLENBQXlELDJEQUFPLENBQUEsT0FBTyxDQUFDLE1BQVIsQ0FBZSxHQUFJLENBQUEsS0FBSixDQUFVLHdCQUFWLENBQWYsQ0FBUCxDQUEwRCxDQUFuSCxpQ0FSK0QseUJBVS9ELE1BQU8sQ0FBQSxNQUFBLENBQUEsTUFBQSxDQUFPLFVBQVAsRUFDSixJQURJLENBQ0MsU0FBQyxPQUFELENBQWlCLGtEQUFLLE1BQUEsQ0FBQSxPQUFPLENBQVAsSUFBQSxFQUFBLENBQWMsQ0FEckMsRUFFSixJQUZJLENBRUMsU0FBQyxLQUFELENBQWdCLGtEQUFLLE1BQUEsQ0FBQSxJQUFBLENBQUEsUUFBQSxDQUFHLFFBQUgsQ0FBWSxLQUFLLENBQWpCLENBQWlCLENBQWpCLENBQUEsQ0FBcUIsQ0FGM0MsRUFHSixJQUhJLENBR0MsU0FBQyxNQUFELENBQWUsa0RBQU0sTUFBQyxDQUMxQixHQUFHLENBQUEsR0FEdUIsQ0FFMUIsT0FBTyxDQUFFLENBQ1AsSUFBSSxDQUFFLE1BQU0sQ0FBQyxRQUFQLEVBREMsQ0FFUCxVQUFVLENBQUUsT0FBTyxDQUFDLFVBQVIsNkJBQXFCLE9BQU8sQ0FBQyxVQUFSLENBQW1CLFFBQXhDLDhCQUFtRCxJQUFuRCxDQUZMLENBR1AsTUFBTSxDQUFFLE9BQU8sQ0FBQyxZQUFSLDZCQUF1QixPQUFPLENBQUMsWUFBUixDQUFxQixJQUFyQixDQUEwQixHQUFqRCw4QkFBdUQsT0FBTyxDQUFDLEdBQVIsQ0FBWSxNQUFaLENBQW1CLEVBQW5CLENBQXZELENBSEQsQ0FJUCxXQUFXLENBQUUsT0FBTyxDQUFDLFlBQVIsNkJBQXVCLE9BQU8sQ0FBQyxZQUFSLENBQXFCLE1BQTVDLDhCQUFxRCxJQUFyRCxDQUpOLENBRmlCLENBQUQsQ0FRZixDQVhQLENBQVAsQ0FZRCxDQXRCYSxDQURoQix5QkF3QkEsTUFBQSxDQUFBLGFBQUEsQ0FBQyxDQXhCRCxFQUFBLENBQUEsQyx5QkEwQlMsT0FBQSxDQUFBLGFBQUEsQ0FBQSxhQUFBLEMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBJbnB1dE9wdGlvbnMgfSBmcm9tICdAYWN0aW9ucy9jb3JlJ1xuaW1wb3J0IHsgQ29udGV4dCB9IGZyb20gJ0BhY3Rpb25zL2dpdGh1Yi9saWIvY29udGV4dCdcbmltcG9ydCB7IGNyZWF0ZSwgR2xvYmJlciB9IGZyb20gJ0BhY3Rpb25zL2dsb2InXG5pbXBvcnQgeyBXZWJob29rUGF5bG9hZCB9IGZyb20gJ0BhY3Rpb25zL2dpdGh1Yi9saWIvaW50ZXJmYWNlcydcbmltcG9ydCB7IHByb21pc2VzIGFzIGZzIH0gZnJvbSAnZnMnXG5pbXBvcnQgeyBTeW5jQ292ZXJhZ2VPcHRpb25zIH0gZnJvbSAnQGhvdGxvb3AvaG90bG9vcC1zZGsnXG5cbmludGVyZmFjZSBDb25maWcge1xuICBrZXk6IHN0cmluZ1xuICBvcHRpb25zOiBTeW5jQ292ZXJhZ2VPcHRpb25zXG59XG5cbnR5cGUgSW5wdXRGdW5jdGlvbiA9IChuYW1lOiBzdHJpbmcsIG9wdGlvbnM/OiBJbnB1dE9wdGlvbnMpID0+IHN0cmluZ1xuXG5jbGFzcyBDb25maWdGYWN0b3J5IHtcbiAgcHVibGljIHN0YXRpYyBnZXQgKGlucHV0Rm46IElucHV0RnVuY3Rpb24sIGdpdGh1YkNvbnRleHQ6IENvbnRleHQpOiBQcm9taXNlPENvbmZpZz4ge1xuICAgIGNvbnN0IG9wdGlvbnMgPSB7IHJlcXVpcmVkOiB0cnVlIH1cbiAgICBjb25zdCBrZXk6IHN0cmluZyA9IGlucHV0Rm4oJ2hvdGxvb3Ata2V5Jywgb3B0aW9ucylcbiAgICBjb25zdCByZXBvcnRQYXRoOiBzdHJpbmcgPSBpbnB1dEZuKCdyZXBvcnQtcGF0aCcsIG9wdGlvbnMpXG4gICAgY29uc3QgY29udGV4dDogV2ViaG9va1BheWxvYWQgPSBnaXRodWJDb250ZXh0LnBheWxvYWRcblxuICAgIGlmIChrZXkgPT09ICcnKSByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdpbnZhbGlkIGhvdGxvb3Aga2V5JykpXG4gICAgaWYgKHJlcG9ydFBhdGggPT09ICcnKSByZXR1cm4gUHJvbWlzZS5yZWplY3QobmV3IEVycm9yKCdpbnZhbGlkIHJlcG9ydCBwYXRoJykpXG4gICAgaWYgKCFjb250ZXh0LnJlcG9zaXRvcnkgfHwgIWNvbnRleHQucmVwb3NpdG9yeS5odG1sX3VybCkgcmV0dXJuIFByb21pc2UucmVqZWN0KG5ldyBFcnJvcignaW52YWxpZCBnaXRodWIgY29udGV4dCcpKVxuXG4gICAgcmV0dXJuIGNyZWF0ZShyZXBvcnRQYXRoKVxuICAgICAgLnRoZW4oKGdsb2JiZXI6IEdsb2JiZXIpID0+IGdsb2JiZXIuZ2xvYigpKVxuICAgICAgLnRoZW4oKGZpbGVzOiBzdHJpbmdbXSkgPT4gZnMucmVhZEZpbGUoZmlsZXNbMF0pKVxuICAgICAgLnRoZW4oKHJlcG9ydDogQnVmZmVyICkgPT4gKHtcbiAgICAgICAga2V5LFxuICAgICAgICBvcHRpb25zOiB7XG4gICAgICAgICAgbGNvdjogcmVwb3J0LnRvU3RyaW5nKCksXG4gICAgICAgICAgcmVwb3NpdG9yeTogY29udGV4dC5yZXBvc2l0b3J5ID8gY29udGV4dC5yZXBvc2l0b3J5Lmh0bWxfdXJsIDogbnVsbCxcbiAgICAgICAgICBicmFuY2g6IGNvbnRleHQucHVsbF9yZXF1ZXN0ID8gY29udGV4dC5wdWxsX3JlcXVlc3QuaGVhZC5yZWYgOiBjb250ZXh0LnJlZi5zdWJzdHIoMTEpLFxuICAgICAgICAgIGlzc3VlTnVtYmVyOiBjb250ZXh0LnB1bGxfcmVxdWVzdCA/IGNvbnRleHQucHVsbF9yZXF1ZXN0Lm51bWJlciA6IG51bGxcbiAgICAgICAgfVxuICAgICAgfSBhcyBDb25maWcpKVxuICB9XG59XG5cbmV4cG9ydCB7IENvbmZpZ0ZhY3RvcnksIElucHV0RnVuY3Rpb24sIENvbmZpZyB9XG4iXX0=